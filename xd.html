<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            div#cards {
                width: 750px;
                margin: auto;
            }

            div#cards img {
                margin: 25px;
            }

        </style>
    </head>

    <body onload="scriptInit()">
        <div id="cards"></div>
        <script>
            let cards = Array();
            let selection = {};
            let result = 0;

            function scriptInit()
            {
                let array = Array();
                for(let i = 0; i < 5; i++) {
                    array.push(`card${i}.jpg`);
                    array.push(`card${i}.jpg`);
                }

                let r_array = Array();
                while(array.length > 0) {
                    let r_random = Math.floor(Math.random() * array.length);
                    let r_card = array.splice(r_random, 1)[0];

                    r_card = { 'url': r_card, 'isVisible': false };
                    r_array.push(r_card);
                }

                cards = r_array;
                showCardsOnWeb();
            }

            function showCardsOnWeb()
            {
                let div = document.getElementById('cards');
                div.innerHTML = "";

                for(let i = 0; i < cards.length; i++) {
                    if(cards[i].isVisible) {
                        div.innerHTML += `<img onClick="cardClicked(${i})" src="cards/${cards[i].url}" alt="">`;
                    } else {
                        div.innerHTML += `<img onClick="cardClicked(${i})" src="cards/back.jpg" alt="">`;
                    }
                }
            }

            function cardClicked(i)
            {
                cards[i].isVisible = !cards[i].isVisible;
                if(selection.first == null) {
                    selection.first = i;
                } else {
                    selection.second = i;
                    if(cards[selection.first].url == cards[selection.second].url) {
                        result ++;
                        if(result >= 5) {
                            document.write(`<center><font size="72px" color="red">GRATULUJEMY! WYGRAŁEŚ GRE XDDD</font></center>`);
                        }
                        selection = {};
                    } else {
                        setTimeout(hideCard, 1000);
                    }
                }

                showCardsOnWeb();
            }

            function hideCard()
            {
                cards[selection.first].isVisible = cards[selection.second].isVisible = false;
                selection = {};
                showCardsOnWeb();
            }
        </script>
    </body>
</html>